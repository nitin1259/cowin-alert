var myMusic = document.getElementById("music");
function play() {
  myMusic.play();
}

function pause() {
  myMusic.pause();
}

function apiRunInOneMin() {
  console.log("--------- Loop started----------");
  const token = document.getElementById("token").value;

  setInterval(function () {
    const availability = [];
    console.log("running at: " + new Date());
    fetch(
      //   "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=581&date=29-05-2021",
      "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=669&date=29-05-2021",
      {
        method: "GET",
        headers: {
          "Content-type": "application/json;charset=UTF-8",
          //   Authorization: token,
        },
      }
    )
      .then((response) => response.json())
      .then((resp) => {
        // console.log(resp);
        const centers = resp.centers || resp.centers;

        centers.forEach((center) => {
          const sessions = center.sessions || center.sessions;

          sessions.forEach((session) => {
            let obj = {};
            if (
              session.min_age_limit === 45 &&
              session.available_capacity > 0 &&
              session.vaccine === "COVISHIELD"
            ) {
              obj.session_id = session.session_id;
              obj.center_id = center.center_id;
              obj.min_age_limit = session.min_age_limit;
              obj.availability = session.available_capacity;
              obj.pincode = center.pincode;

              // alert(JSON.stringify(obj));
              console.log(JSON.stringify(obj));

              document.getElementById("display-json").value =
                JSON.stringify(obj);

              play();
              availability.push(obj);
            }
          });
        });
      })
      .catch((err) => console.log(err));

    if (availability.length > 0) {
      alert(JSON.stringify(availability));
      console.log(availability);
    }
  }, 10 * 1000); // 60 * 1000 milsec
}

function myFunction() {
  var token = document.getElementById("token").value;

  console.log(token);
  fetch("https://cdn-api.co-vin.in/api/v2/auth/getRecaptcha", {
    method: "POST",
    headers: {
      "Content-type": "application/json;charset=UTF-8",
      Authorization: token,
    },
  })
    .then((response) => response.json())
    .then((resp) => {
      var svg2 = resp.captcha;
      var container = document.getElementById("container");
      container.innerHTML = svg2;

      // Short script to encode our SVG in base64
      // This can be reversed using window.atob('base64')
      var code = document.getElementById("code");
      var demo = document.getElementById("demo");
      var svg = document.getElementsByTagName("svg")[0];

      // Convert the SVG node to HTML.
      var div = document.createElement("div");
      div.appendChild(svg.cloneNode(true));

      // Encode the SVG as base64
      var b64 = "data:image/svg+xml;base64," + window.btoa(div.innerHTML);
      var url = 'url("' + b64 + '")';
      code.innerHTML =
        "Base64 CSS (for cross-browser compatibility)\n\nbackground-image: " +
        url +
        ";";
      demo.style.backgroundImage = url;
      console.log(url);
    })
    .catch((err) => console.log(err));
}
/*
var svg2 =
  '<svg xmlns="http://www.w3.org/2000/svg" width="150" height="50" viewBox="0,0,150,50"><path d="M21 30 C57 27,75 35,138 37" stroke="#888" fill="none"/><path fill="#111" d="M105.90 34.69L105.93 34.72L105.84 34.63Q105.87 38.24 102.71 39.53L102.81 39.63L102.75 39.57Q100.95 40.48 96.54 40.63L96.36 40.45L96.39 40.48Q91.62 40.63 89.38 39.45L89.35 39.42L89.32 39.39Q87.64 38.25 87.80 34.90L87.75 34.85L87.69 34.79Q87.86 34.31 88.05 32.33L87.96 32.24L87.99 32.28Q88.11 30.68 88.11 29.69L88.03 29.61L88.15 29.73Q88.14 21.73 83.96 14.31L83.92 14.27L83.91 14.26Q85.03 14.88 88.00 15.95L87.90 15.85L87.99 15.95Q90.90 22.69 90.90 30.08L90.80 29.98L90.94 30.12Q90.87 30.66 90.78 31.84L90.81 31.87L90.79 31.85Q90.63 32.98 90.63 33.59L90.75 33.70L90.66 33.61Q90.60 35.84 92.16 36.83L92.25 36.92L92.24 36.91Q93.87 37.70 96.84 37.70L96.87 37.72L96.96 37.81Q99.47 37.70 101.11 36.52L101.10 36.51L101.08 36.49Q102.93 35.15 102.78 32.63L102.89 32.74L102.84 32.70Q102.70 31.26 102.70 29.92L102.65 29.88L102.71 29.94Q102.65 22.83 105.05 16.32L105.10 16.38L107.25 15.79L107.28 15.82Q108.30 15.58 109.41 15.13L109.29 15.01L109.36 15.08Q105.69 22.26 105.69 29.84L105.64 29.78L105.59 29.73Q105.56 30.54 105.69 32.18L105.69 32.18L105.88 32.37Q105.96 33.95 105.96 34.75ZM108.00 35.53L108.13 35.66L108.02 35.55Q107.15 30.61 107.88 25.51L107.87 25.51L107.92 25.56Q108.69 20.39 111.09 16.01L111.14 16.06L110.98 15.90Q110.48 16.31 109.04 16.96L109.01 16.94L108.96 16.89Q109.26 15.97 110.06 14.41L110.16 14.51L110.17 14.52Q106.71 15.74 104.81 16.08L104.77 16.05L104.83 16.11Q102.40 22.54 102.40 29.81L102.35 29.76L102.40 29.82Q102.33 31.12 102.41 32.53L102.44 32.57L102.47 32.59Q102.71 35.07 100.92 36.29L100.79 36.16L100.92 36.29Q99.31 37.23 96.80 37.27L96.81 37.28L96.77 37.24Q94.17 37.46 92.72 36.70L92.65 36.62L92.68 36.66Q92.59 36.15 92.51 35.69L92.41 35.59L92.56 35.74Q92.54 35.26 92.65 34.76L92.65 34.76L92.65 34.77Q92.71 32.28 92.71 29.95L92.81 30.05L92.81 30.05Q92.72 24.13 91.19 18.23L91.31 18.34L91.31 18.35Q90.47 18.12 89.07 17.78L89.16 17.87L89.04 17.76Q88.69 16.49 88.24 15.58L88.20 15.54L88.23 15.57Q85.65 14.93 83.25 13.56L83.24 13.55L83.16 13.48Q87.75 21.03 87.75 29.75L87.67 29.67L87.68 29.68Q87.83 31.47 87.68 33.18L87.58 33.08L87.57 33.07Q87.43 35.56 87.51 36.74L87.40 36.63L87.52 36.75Q87.65 38.67 88.90 39.81L88.87 39.77L88.78 39.69Q89.85 42.24 94.50 42.62L94.40 42.53L94.41 42.53Q96.66 42.85 98.79 42.92L98.81 42.94L98.63 42.76Q104.12 43.07 106.90 42.12L106.96 42.19L106.95 42.17Q108.49 41.24 108.49 39.18L108.56 39.26L108.56 39.26Q108.53 38.08 108.07 35.60Z"/><path fill="#222" d="M114.57 49.55L114.62 49.60L114.70 49.68Q117.62 45.82 120.51 39.62L120.45 39.56L120.53 39.63Q117.38 33.06 111.29 24.99L111.16 24.85L111.19 24.88Q113.11 26.05 115.89 26.70L115.93 26.74L115.82 26.63Q119.54 31.49 121.98 36.70L121.79 36.51L121.96 36.69Q124.10 31.36 127.18 26.95L127.04 26.80L127.08 26.84Q129.29 26.50 131.39 25.70L131.48 25.80L131.44 25.76Q128.00 29.55 124.53 36.97L124.65 37.09L121.65 42.92L121.80 43.08Q120.27 46.11 118.52 48.74L118.56 48.78L118.54 48.76Q116.19 49.18 114.74 49.72ZM120.79 50.93L120.87 51.02L120.81 50.95Q122.63 48.16 124.07 44.89L123.91 44.73L126.62 38.38L126.77 38.53Q130.23 30.45 133.54 26.45L133.46 26.37L133.57 26.48Q132.20 27.13 130.30 27.82L130.35 27.87L131.39 26.47L131.38 26.46Q131.86 25.68 132.47 25.00L132.53 25.06L132.53 25.06Q129.80 26.06 126.94 26.52L126.95 26.52L127.02 26.60Q124.15 30.39 122.21 34.84L122.28 34.91L122.31 34.94Q120.69 31.65 118.90 28.83L118.82 28.74L118.88 28.80Q118.56 28.67 118.19 28.64L118.23 28.67L118.28 28.72Q118.02 28.79 117.83 28.79L117.67 28.63L117.71 28.67Q117.07 27.53 116.12 26.39L116.03 26.30L116.03 26.30Q112.92 25.70 110.18 23.99L110.11 23.92L110.13 23.94Q116.43 31.99 120.12 39.60L120.07 39.55L120.09 39.57Q117.84 44.55 113.76 50.19L113.87 50.29L113.75 50.18Q114.72 50.04 115.52 49.89L115.50 49.87L117.10 49.49L117.11 49.49Q116.39 50.11 115.21 51.75L115.24 51.78L115.20 51.74Q117.60 51.24 120.87 51.01Z"/><path d="M15 40 C78 1,74 45,134 8" stroke="#888" fill="none"/><path fill="#444" d="M54.31 37.88L54.34 37.90L54.25 37.82Q54.65 38.90 55.18 40.92L55.24 40.98L55.20 40.94Q50.92 39.55 46.32 39.82L46.38 39.88L46.30 39.81Q41.75 40.09 37.76 42.07L37.86 42.18L37.68 42.00Q37.93 41.33 37.97 41.40L38.06 41.50L38.05 41.49Q41.78 37.53 45.70 33.12L45.74 33.16L45.74 33.15Q50.19 28.20 51.37 23.51L51.25 23.39L51.30 23.44Q51.66 21.60 50.39 20.42L50.47 20.50L50.41 20.44Q49.20 19.33 47.41 19.48L47.46 19.53L47.50 19.57Q47.13 19.51 46.79 19.51L46.72 19.43L46.69 19.41Q45.27 19.51 44.01 20.42L43.92 20.33L44.03 20.43Q42.75 21.83 42.98 24.49L42.90 24.41L42.84 24.35Q41.03 23.99 39.81 23.53L39.92 23.64L39.91 23.63Q39.63 22.13 39.56 20.69L39.51 20.64L39.52 20.65Q39.55 19.12 40.16 17.98L40.23 18.04L40.07 17.88Q41.97 16.63 45.32 16.63L45.37 16.68L47.03 16.58L47.01 16.57Q49.40 16.71 50.35 16.82L50.23 16.70L50.28 16.76Q54.57 17.12 54.84 19.56L54.90 19.62L54.87 19.59Q54.94 20.15 54.86 20.95L54.81 20.90L54.95 21.04Q54.74 21.51 54.59 22.20L54.77 22.39L54.66 22.27Q53.04 30.40 45.47 37.26L45.46 37.25L45.40 37.19Q46.97 37.20 48.34 37.20L48.16 37.02L48.21 37.07Q51.43 37.05 54.29 37.85ZM53.76 17.07L53.82 17.13L53.77 17.08Q52.23 16.49 50.52 16.42L50.54 16.44L47.06 16.20L47.10 16.24Q42.60 15.92 40.39 17.03L40.46 17.09L40.46 17.09Q39.29 18.36 39.29 20.42L39.37 20.50L39.24 20.37Q39.39 21.21 39.70 24.02L39.70 24.02L39.72 24.04Q40.25 24.27 41.43 24.57L41.43 24.57L41.44 25.62L41.40 25.57Q41.34 26.01 41.42 26.55L41.46 26.59L41.46 26.59Q42.70 26.68 45.17 26.91L45.12 26.85L45.15 26.89Q45.18 26.58 45.18 26.24L45.12 26.17L45.09 26.14Q45.15 24.38 46.37 23.02L46.28 22.94L46.31 22.96Q47.44 21.52 49.23 21.64L49.38 21.79L49.41 21.83Q49.99 21.67 50.75 21.83L50.89 21.97L50.80 21.88Q51.03 22.38 51.11 22.79L50.95 22.64L51.09 22.78Q51.04 23.11 50.97 23.45L51.03 23.52L50.99 23.48Q49.75 28.25 45.33 33.09L45.23 32.98L45.26 33.02Q43.15 35.28 37.70 41.33L37.73 41.35L37.79 41.42Q37.58 42.23 37.23 42.80L37.26 42.83L37.15 42.72Q38.85 41.95 40.37 41.41L40.28 41.32L40.36 41.40Q39.59 41.92 38.64 43.41L38.59 43.36L38.60 43.37Q38.47 43.70 38.35 44.04L38.48 44.16L38.52 44.21Q43.23 41.99 48.72 42.18L48.71 42.18L48.79 42.26Q54.46 42.40 59.03 44.76L59.06 44.80L58.07 42.66L58.05 42.64Q57.42 41.33 57.15 40.53L57.08 40.45L57.09 40.47Q56.44 40.12 55.22 39.70L55.12 39.60L55.10 39.58Q54.96 38.86 54.58 37.49L54.65 37.57L54.61 37.53Q52.41 36.97 50.13 36.78L50.14 36.79L50.13 36.78Q54.78 32.18 56.30 23.92L56.26 23.88L56.52 21.05L56.46 20.99Q56.49 19.31 55.27 18.63L55.35 18.70L55.27 18.66L55.12 18.51Q55.20 18.55 55.12 18.55L55.02 18.44L55.00 18.43Q54.87 17.68 53.76 17.07Z"/><path fill="#222" d="M30.30 40.30L30.38 40.39L30.32 40.33Q27.34 36.43 24.71 27.79L24.84 27.92L24.83 27.91Q24.13 25.72 23.33 23.59L23.27 23.52L20.45 32.36L20.41 32.32Q18.56 37.20 16.16 40.44L16.24 40.52L16.13 40.41Q15.34 40.53 13.70 40.68L13.65 40.63L13.84 40.82Q13.92 39.60 13.92 38.35L13.90 38.33L13.83 38.27Q13.93 32.35 11.19 26.22L11.18 26.21L11.12 26.15Q8.04 19.30 2.18 14.31L2.09 14.22L2.12 14.26Q4.20 14.89 6.56 15.42L6.71 15.57L6.56 15.42Q15.27 23.90 16.56 34.86L16.67 34.97L16.65 34.96Q18.18 31.54 19.63 26.17L19.68 26.21L19.73 26.27Q21.65 18.71 22.14 17.30L22.12 17.28L24.40 17.31L24.32 17.23Q25.05 19.29 25.70 21.61L25.84 21.76L26.93 26.04L26.92 26.04Q28.53 31.53 29.94 34.77L30.05 34.87L29.94 34.76Q31.71 23.25 39.63 15.90L39.57 15.84L39.49 15.76Q41.12 15.53 44.09 14.88L44.11 14.90L44.10 14.89Q38.80 19.23 35.76 25.36L35.70 25.30L35.57 25.17Q32.56 31.48 32.56 38.26L32.58 38.28L32.68 38.39Q32.61 39.42 32.69 40.56L32.76 40.63L31.43 40.33L31.56 40.46Q30.87 40.30 30.30 40.30ZM36.70 43.35L36.59 43.24L36.63 43.29Q35.28 39.61 35.40 35.73L35.52 35.85L35.45 35.78Q35.89 24.35 45.25 16.08L45.25 16.08L45.25 16.08Q44.28 16.29 42.34 16.83L42.21 16.70L42.21 16.69Q43.29 15.98 45.19 14.19L45.11 14.12L45.05 14.05Q42.58 15.01 39.65 15.50L39.47 15.33L39.62 15.47Q32.14 22.61 30.23 32.09L30.13 31.99L30.12 31.97Q29.55 30.34 26.69 18.88L26.76 18.94L26.68 18.87Q26.26 18.94 25.31 18.94L25.37 19.00L25.04 17.91L25.09 17.96Q24.99 17.44 24.76 16.95L24.65 16.84L21.86 16.94L21.76 16.84Q20.90 19.25 19.62 24.37L19.61 24.36L19.72 24.47Q18.34 29.48 17.35 31.96L17.35 31.96L17.49 32.10Q15.95 24.24 10.39 17.92L10.30 17.83L10.39 17.92Q9.73 17.68 8.78 17.49L8.77 17.48L8.92 17.63Q8.12 16.72 6.56 15.08L6.64 15.16L6.53 15.05Q3.21 14.31 1.04 13.51L1.03 13.51L0.93 13.40Q6.79 18.28 10.07 24.48L9.92 24.34L9.89 24.31Q13.39 30.97 13.39 37.98L13.38 37.96L13.49 38.07Q13.53 39.67 13.34 41.27L13.30 41.23L13.16 41.09Q13.39 41.10 13.85 41.00L13.95 41.10L13.98 41.13Q14.47 41.07 14.70 41.07L14.66 41.03L14.62 42.02L14.54 41.94Q14.53 42.39 14.61 42.92L14.71 43.02L14.69 43.00Q15.79 42.88 18.07 42.73L18.20 42.86L18.17 42.83Q21.72 37.36 24.46 27.96L24.56 28.05L24.49 27.98Q27.26 36.77 30.23 40.73L30.32 40.82L30.15 40.65Q30.80 40.84 31.63 40.95L31.49 40.80L31.52 40.84Q32.49 41.99 33.55 43.06L33.43 42.94L33.51 43.02Q34.15 42.93 36.54 43.20Z"/><path d="M18 40 C62 46,95 32,137 45" stroke="#555" fill="none"/><path fill="#444" d="M71.01 29.11L71.00 29.10L70.95 29.05Q69.22 29.03 67.98 30.46L67.96 30.44L67.90 30.38Q66.70 31.85 66.51 33.75L66.51 33.75L66.44 33.67Q66.30 35.82 67.39 36.79L67.34 36.74L67.43 36.83Q68.52 37.81 70.61 37.70L70.51 37.60L70.65 37.74Q72.68 37.52 73.79 36.84L73.85 36.90L73.67 36.72Q74.81 35.61 74.81 34.05L74.95 34.19L74.85 34.09Q74.83 33.69 74.76 33.31L74.82 33.38L74.89 33.45Q74.99 31.79 73.88 30.44L73.78 30.34L73.85 30.41Q72.75 29.07 71.08 29.18ZM70.57 40.21L70.57 40.21L70.59 40.22Q66.28 40.29 64.87 39.53L64.80 39.46L64.71 39.37Q63.85 38.77 63.66 37.06L63.60 37.00L63.52 36.92Q63.60 36.36 63.64 35.64L63.69 35.68L63.63 35.63Q63.75 34.64 63.75 34.19L63.76 34.19L63.63 34.07Q64.26 31.38 64.41 30.69L64.29 30.57L64.36 30.65Q64.70 28.59 65.54 27.18L65.64 27.28L65.52 27.16Q68.34 22.93 74.28 16.58L74.28 16.58L74.24 16.54Q76.93 16.26 79.14 15.46L79.08 15.41L78.99 15.31Q72.16 22.80 68.97 27.03L68.99 27.06L68.98 27.04Q70.02 26.60 71.32 26.60L71.30 26.58L71.30 26.58Q74.56 26.53 76.08 28.47L76.14 28.53L76.17 28.56Q77.44 30.14 77.79 33.68L77.78 33.67L77.82 33.71Q77.85 34.39 77.85 34.99L77.87 35.02L77.97 35.12Q77.89 38.16 75.68 39.22L75.65 39.20L75.70 39.24Q74.49 39.86 70.60 40.24ZM72.80 42.54L72.78 42.53L72.88 42.63Q74.13 42.54 76.10 42.62L76.11 42.62L76.18 42.69Q77.82 42.77 79.38 42.05L79.32 41.99L79.27 41.94Q80.43 41.19 80.43 39.40L80.52 39.49L80.41 39.39Q80.39 38.87 80.22 37.88L80.32 37.98L80.37 38.03Q80.07 36.91 80.07 36.46L80.11 36.49L80.06 36.44Q79.22 31.76 77.62 29.86L77.72 29.96L77.59 29.82Q77.60 29.80 77.44 29.57L77.50 29.62L77.18 29.38L77.04 29.28L77.07 29.30Q76.76 28.85 76.15 27.90L76.17 27.91L76.15 27.90Q75.10 26.80 73.12 26.34L73.11 26.34L73.15 26.37Q74.39 24.80 77.36 21.11L77.46 21.21L81.64 15.87L81.50 15.73Q80.09 16.76 77.69 17.52L77.64 17.47L77.61 17.44Q78.58 16.50 80.37 14.52L80.31 14.47L80.26 14.42Q77.90 15.52 74.02 16.09L74.04 16.11L74.03 16.11Q68.29 21.97 65.32 26.92L65.46 27.07L65.44 27.04Q63.81 29.45 63.24 35.69L63.20 35.65L63.37 35.82Q63.16 36.26 63.24 37.21L63.26 37.24L63.38 37.35Q63.26 38.91 64.36 39.82L64.41 39.87L64.51 39.97Q64.93 40.16 64.89 40.20L64.76 40.07L64.88 40.19Q65.10 40.94 65.90 41.35L65.94 41.40L66.08 41.54Q67.36 42.06 69.30 42.25L69.45 42.39L69.38 42.32Q69.35 42.30 72.85 42.60ZM72.56 31.31L72.61 31.36L72.71 31.46Q73.17 31.24 74.13 31.73L74.21 31.82L74.16 31.77Q74.51 32.73 74.51 33.37L74.61 33.47L74.44 33.31Q74.75 35.29 73.80 36.28L73.71 36.19L73.77 36.25Q72.69 36.96 70.59 37.26L70.63 37.30L70.67 37.34Q69.15 37.26 68.61 36.99L68.53 36.91L68.57 36.94Q68.44 36.55 68.44 36.25L68.33 36.14L68.38 36.18Q68.13 32.89 71.06 31.60L71.08 31.62L71.03 31.57Q71.84 31.27 72.60 31.35Z"/></svg>';
var container = document.getElementById("container");
container.innerHTML = svg2;

// Short script to encode our SVG in base64
// This can be reversed using window.atob('base64')
var code = document.getElementById("code");
var demo = document.getElementById("demo");
var svg = document.getElementsByTagName("svg")[0];

// Convert the SVG node to HTML.
var div = document.createElement("div");
div.appendChild(svg.cloneNode(true));

// Encode the SVG as base64
var b64 = "data:image/svg+xml;base64," + window.btoa(div.innerHTML);
var url = 'url("' + b64 + '")';
code.innerHTML =
  "Base64 CSS (for cross-browser compatibility)\n\nbackground-image: " +
  url +
  ";";
demo.style.backgroundImage = url;
console.log(url);
*/
